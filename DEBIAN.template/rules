#!/usr/bin/make -f
export DH_VERBOSE = 1

%:
	dh $@ --with=systemd --with=golang

build:
	cd usr/src/process-exporter && go build -o process-exporter cmd/process-exporter/main.go
	#tree
	#mkdir -p $(CURDIR)/debian/td-process-exporter/usr/bin123
	#mv -fv usr/src/process-exporter/process-exporter $(CURDIR)/debian/td-process-exporter/usr/bin123
	# mv -fv usr/src/process-exporter/process-exporter $(CURDIR)/debian/td-process-exporter/usr/bin123
	mkdir usr/bin123
	cp -v usr/src/process-exporter/process-exporter usr/bin123
	cp -v usr/src/process-exporter/process-exporter usr/bin

override_dh_golang:
	echo "noop"

override_dh_systemd_enable:
	dh_systemd_enable --name process-exporter

override_dh_installinit:
	dh_installinit --name process-exporter
